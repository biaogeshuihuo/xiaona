<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>

</body>
<script>
  /*
    需求：
      1.无限弹出输入框，让用户可以输入对应的功能
      2.输入1,求多个数字的和
      2.输入2,可以得到当前的系统的时间
      3.输入3，可以弹出一个随机的笑话
      4.输入q，结束整个无限弹出提示框

    任何一个大项目，我们可能会遇上很多的功能
    其实只需要把每个功能，一个一个分析，然后一个一个的完成，大项目也就完成了
  */

  /* 1.无限弹出输入框
    思路：
      其实就是不断的重复 prompt 这个代码
      为止次数的循环，使用while循环来实现
  */

  /* 4.如果输入的是q，结束弹窗
    判断输入的结果是否是q,如果是q，就终止while循环
  */

  /* 2.输入1或者总和，可以实现求多个数字的和
    输入1，会继续弹出一个输入框，让我们可以输入想要求和的数字
    把输入的数字，求和


    步骤：
      2.1 判断输入的信息是否是1
      2.2 弹出一个输入，并且提示用户如何输入
  */

  /*
    3.输入2或者时间，获取当前的系统时间
    步骤：
      3.1 判断输入的是否为2
      3.2 弹出当前的系统的时间
  */

  /*
    4.输入3，随机得到一条笑话，提示出来
    4.1 先准备大量的笑话
      - 到网上，随便复制粘贴几个，然后放到一个数组里面
    4.2 随机的从大量的笑话中取出1条
      - 需要从数组里面随机获取一条
      - 随机一个索引，从数组中获取一条数据
    4.3 提示出来
      - alert
  */

  // 1.1 写一个while循环，让浏览器无限弹出输入框
  while (true) {
    var msg = prompt("你好，我是传智小娜，你的语音助手~~~~~~~\n" +
      "输入《编号》或《关键词》选择功能，输入q退出聊天\n" +
      " 1.计算《总和》\n" +
      " 2.获取《时间》\n" +
      " 3.讲个《笑话》\n")
    // 4.1 判断 输入的结果是否是 q ，如果是q，就结束while循环
    if (msg === 'q') {
      alert('主人你已经不爱小娜了吗?')
      break;
    }

    /* 输入的1,2,3其实都是固定值，我们可以采用switch来判断 */
    switch (msg) {
      // 2.1 判断输入的信息是否为1
      case '1':
      case '总和':
        // 求和的代码
        // 2.2 弹出一个输入框，提示用户输入求和的数字，要求用户以逗号隔开
        // 2.3 得到输入的数字
        var numbers = prompt('请输入要求和的数字，使用逗号隔开，例如： 1,2,3,4');
        // js里面提供了一个方法，可以帮助我们把一个有规律的字符串，分割开
        // 2.4 将字符串分割数组，然后在相加
        var arr = numbers.split(','); // 就是一个数组了
        // 2.5 遍历数组，把里面的每个数字相加，就是求出总和了
        var sum = 0;
        for (var i = 0; i < arr.length; i++) {
          // 此时数组里面的每个数据仍然是字符串，需要先转换为数字再相加
          sum += parseFloat(arr[i]);
        }
        // 2.6 提示用户即可
        alert('求出的总和为：' + sum);
        break;
      // 判断输入的是否是2
      case '2':
        // 3.2 弹出一个当前的系统的时间
        // 得到当前的系统时间
        var date = new Date();
        // 分别获取里面的年月日时分秒，拼接成为 ： yyyy-MM-dd hh:mm:ss 格式
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        // 如果不够两位，补一个0在前面
        if(month < 10){
          month = '0'+month;
        }
        var day = date.getDate();
        if(day < 10){
          day = '0' + day;
        }
        var hour = date.getHours();
        if(hour < 10){
          hour = '0' + hour;
        }
        var minute = date.getMinutes();
        if(minute < 10){
          minute = '0' + minute;
        }
        var second = date.getSeconds();
        if(second < 10){
          second = '0' + second;
        }
        // 拼接
        var time = year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second;
        alert(time);
        break;
      // 判断输入的是否是3
      case '3':
      case '笑话':
        // 4.1 先准备大量的笑话，使用一个数组存储起来
        var list = [
          "为什么结婚都喜欢选好日子，因为结婚后都没有好日子。",
          "为什么超人都喜欢穿紧身衣，因为救人要紧",
          "火柴有个问题想不懂，然后就挠头，自己燃烧了自己",
          "包子跑步，为什么在路上消失了，因为太饿自己把自己吃了",
          "自己的事情自己做，函数也能调用自己"
        ];
        // 4.2 随机一个整数，作为索引，到数组里面获取笑话
        // 随机一个小数
        var r = Math.random();
        // 放大一定的倍数，倍数就是数组的长度
        r *= list.length;
        // 向下取整
        r = Math.floor(r);
        // 4.3 提示出这个笑话就行了
        alert(list[r]);
        break;
    }
  }
</script>

</html>